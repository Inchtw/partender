(()=>{"use strict";var e,t,n={},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.m=n,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".main.js",r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="partender-website:",r.l=(n,o,i,a)=>{if(e[n])e[n].push(o);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){l=u;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+i),l.src=n),e[n]=[o];var g=(t,o)=>{l.onerror=l.onload=null,clearTimeout(m);var r=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((e=>e(o))),t)return t(o)},m=setTimeout(g.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=g.bind(null,l.onerror),l.onload=g.bind(null,l.onload),s&&document.head.appendChild(l)}},r.p="./",(()=>{var e={792:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=i);var a=r.p+r.u(t),l=new Error;r.l(a,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,o[1](l)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,i,[a,l,s]=n,c=0;if(a.some((t=>0!==e[t]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);s&&s(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkpartender_website=self.webpackChunkpartender_website||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();const i=[{id:"1",title:"私人派對調酒",description:"為您的生日、週年慶或家庭聚會提供客製化調酒服務，打造獨特的派對體驗。",icon:"cocktail"},{id:"2",title:"企業活動調酒",description:"為企業年會、產品發表會或客戶答謝會提供專業調酒服務，提升活動品質與格調。",icon:"briefcase"},{id:"3",title:"調酒工作坊",description:"提供專業調酒教學，讓您和朋友一起學習調酒技巧，體驗調酒的樂趣與藝術。",icon:"graduation-cap"}],a=[{id:"1",title:"威士忌煙燻",description:"傳統經典，煙燻風味",imageUrl:"/assets/images/gallery/whiskey.jpg",category:"經典調酒"},{id:"2",title:"夏日莓果",description:"清爽果香，完美夏日",imageUrl:"/assets/images/gallery/summer.jpg",category:"創意調酒"},{id:"3",title:"熱帶風情",description:"朗姆為基底，異國情調",imageUrl:"/assets/images/gallery/tropical.jpg",category:"主題派對"},{id:"4",title:"企業派對",description:"量身定制，品牌專屬",imageUrl:"/assets/images/gallery/corporate.jpg",category:"企業活動"},{id:"5",title:"分子雲霧",description:"科技與藝術的結合",imageUrl:"/assets/images/gallery/molecular.jpg",category:"分子調酒"},{id:"6",title:"無酒精特調",description:"同樣精彩，無需酒精",imageUrl:"/assets/images/gallery/non-alcoholic.jpg",category:"無酒精調飲"}],l="G-XXXXXXXXXX";function s(e,t,n,o){window.gtag&&window.gtag("event",t,{event_category:e,event_label:n,value:o})}const c={apiKey:"YOUR_API_KEY",authDomain:"your-project-id.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project-id.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID",measurementId:"YOUR_MEASUREMENT_ID"},d=document.getElementById("loginBtn"),u=document.getElementById("loginModal"),g=document.getElementById("loginForm"),m=document.getElementById("registerForm"),y=document.querySelectorAll(".tab-btn"),h=document.getElementById("loginTab"),p=document.getElementById("registerTab"),v=document.querySelector(".modal-close"),f=document.getElementById("member"),w=document.getElementById("memberName"),b=document.getElementById("bookingsList"),E=document.getElementById("bookingCount"),k=document.getElementById("pointsCount"),_=document.getElementById("logoutBtn");async function L(){try{const e=await async function(){const{getAuth:e}=await Promise.all([r.e(461),r.e(150)]).then(r.bind(r,150)),t=e();return new Promise((e=>{const n=t.onAuthStateChanged((t=>{n(),e(t)}))}))}();e?(d.style.display="none",f.style.display="block",w.textContent=e.displayName||e.email?.split("@")[0]||"會員",await async function(e){try{const t=await async function(e){try{const{getFirestore:t,collection:n,query:o,where:i,getDocs:a}=await Promise.all([r.e(461),r.e(594)]).then(r.bind(r,594)),l=o(n(t(),"bookings"),i("userId","==",e)),s=await a(l),c=[];return s.forEach((e=>{c.push({id:e.id,...e.data()})})),c}catch(e){throw console.error("獲取用戶預約失敗:",e),e}}(e);if(0===t.length)return b.innerHTML='<p class="no-bookings">您目前沒有預約記錄。</p>',void(E.textContent="0");E.textContent=t.length.toString(),b.innerHTML=t.map((e=>{return`\n      <div class="booking-item">\n        <div class="booking-info">\n          <h4 class="booking-title">${e.serviceType} - ${e.guestCount}人</h4>\n          <p class="booking-date">${t=e.date,new Date(t).toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>\n        </div>\n        <span class="booking-status status-${e.status.toLowerCase()}">${function(e){switch(e.toLowerCase()){case"confirmed":return"已確認";case"pending":return"待確認";case"cancelled":return"已取消";default:return e}}(e.status)}</span>\n      </div>\n    `;var t})).join("")}catch(e){console.error("加載用戶預約失敗:",e),b.innerHTML='<p class="no-bookings">無法加載預約記錄。</p>'}}(e.uid),k.textContent="150",s("auth","user_authenticated")):(d.style.display="block",f.style.display="none")}catch(e){console.error("檢查認證狀態失敗:",e)}}function I(e,t={}){if(e.includes("res.cloudinary.com/df4ru2dy3/image/upload"))return e;if(!e.includes("cloudinary")&&!e.startsWith("assets/"))return e;if(e.startsWith("assets/")){const t=e.replace("assets/","");e=`https://res.cloudinary.com/df4ru2dy3/image/upload/v1/partender/${t}`}const n=[];t.width&&n.push(`w_${t.width}`),t.height&&n.push(`h_${t.height}`),t.crop&&n.push(`c_${t.crop}`),t.format?n.push(`f_${t.format}`):n.push("f_auto"),t.quality?n.push(`q_${t.quality}`):n.push("q_auto"),t.dpr?n.push(`dpr_${t.dpr}`):n.push("dpr_auto"),n.push("fl_progressive");const o=n.join(",");if(e.includes("cloudinary")){const t=e.split("/upload/");if(2===t.length)return t[1].startsWith("v1/")?`${t[0]}/upload/${o}/${t[1]}`:`${t[0]}/upload/${o}/v1/partender/${t[1]}`}return e}const x="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("192.168.");console.log("環境檢測:",{isLocalhost:x,hostname:window.location.hostname}),document.addEventListener("DOMContentLoaded",(function(){console.log("開始初始化圖片...");const e=document.querySelectorAll("img[data-cloudinary-url]");console.log(`找到 ${e.length} 個需要初始化的圖片`),e.forEach(((e,t)=>{const n=e.getAttribute("data-cloudinary-url"),o=e.getAttribute("data-local-fallback");console.log(`圖片 ${t+1}:`,{element:e,cloudinaryUrl:n,localFallback:o}),n&&function(e,t,n){if(console.log("開始加載圖片:",{cloudinaryUrl:t,localFallbackPath:n}),x&&n)console.log("本地環境，優先使用本地圖片:",n),e.src=n,e.onerror=function(){console.error("本地圖片加載失敗，嘗試使用 Cloudinary:",t);let n=t;n.includes("/upload/")&&!n.includes("fl_no_referrer")&&(n=n.replace("/upload/","/upload/fl_no_referrer/")),e.src=n,e.onerror=function(){console.error("Cloudinary 圖片也加載失敗:",n),e.alt="圖片加載失敗",e.style.border="1px dashed red",e.style.padding="10px",e.style.width="100px",e.style.height="50px"}};else{let o=t;x&&o.includes("/upload/")&&!o.includes("fl_no_referrer")&&(o=o.replace("/upload/","/upload/fl_no_referrer/")),console.log("使用 Cloudinary 圖片:",o),e.src=o,e.onerror=function(){console.error("Cloudinary 圖片加載失敗:",o),n?(console.log("嘗試使用本地備份圖片:",n),e.src=n,e.onerror=function(){console.error("本地備份圖片也加載失敗:",n),e.alt="圖片加載失敗",e.style.border="1px dashed red",e.style.padding="10px",e.style.width="100px",e.style.height="50px"}):(e.alt="圖片加載失敗",e.style.border="1px dashed red",e.style.padding="10px",e.style.width="100px",e.style.height="50px")}}}(e,n,o||void 0)}))}));const $=document.getElementById("backToTop"),C=document.getElementById("navbar"),B=document.getElementById("mobileMenuBtn"),S=document.getElementById("navLinks"),A=document.getElementById("galleryContainer"),q=document.getElementById("servicesContainer"),j=document.getElementById("contactForm"),P=document.getElementById("currentYear"),T=document.getElementById("ageVerificationModal"),D=document.getElementById("ageConfirmBtn"),M=document.getElementById("ageDenyBtn");function U(){document.querySelectorAll(".gallery-item").forEach((e=>{e.addEventListener("click",(()=>{const t=e.querySelector("img")?.getAttribute("src"),n=e.querySelector(".gallery-title")?.textContent,o=e.getAttribute("data-id");t&&(!function(e,t){const n=document.createElement("div");n.className="lightbox",n.innerHTML=`\n    <div class="lightbox-content">\n      <button class="lightbox-close">&times;</button>\n      <img src="${e}" alt="${t}">\n      <div class="lightbox-caption">${t}</div>\n    </div>\n  `,document.body.appendChild(n),document.body.style.overflow="hidden";const o=n.querySelector(".lightbox-close");o?.addEventListener("click",(()=>{document.body.removeChild(n),document.body.style.overflow="",s("lightbox","close",t)})),n.addEventListener("click",(e=>{e.target===n&&(document.body.removeChild(n),document.body.style.overflow="",s("lightbox","background_close",t))})),s("lightbox","open",t)}(I(t,{width:1200,quality:90}),n||""),s("gallery","click",n||`項目 ${o}`))}))}))}document.addEventListener("DOMContentLoaded",(async function(){const e=document.querySelector(".logo-img"),t=document.querySelector(".footer-logo .logo-img");e&&(e.style.height="50px",e.style.width="auto"),t&&(t.style.height="50px",t.style.width="auto"),["assets/images/logo/logo-white.png","assets/images/hero-bg.jpg","assets/images/about.jpg"].forEach((e=>{const t=I(e,{width:1200,quality:60}),n=document.createElement("link");n.rel="preload",n.as="image",n.href=t,document.head.appendChild(n)})),function(){const e=document.createElement("script");function t(...e){window.dataLayer.push(e)}e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${l}`,document.head.appendChild(e),window.dataLayer=window.dataLayer||[],t("js",new Date),t("config",l),window.gtag=t}();try{await async function(){try{const{initializeApp:e}=await Promise.all([r.e(461),r.e(223)]).then(r.bind(r,223)),{getAnalytics:t}=await Promise.all([r.e(461),r.e(75)]).then(r.bind(r,75)),n=e(c);return t(n),console.log("Firebase 初始化成功"),n}catch(e){throw console.error("Firebase 初始化失敗:",e),e}}(),await async function(){d?.addEventListener("click",(()=>{u.style.display="flex",s("auth","open_login_modal")})),v?.addEventListener("click",(()=>{u.style.display="none",s("auth","close_login_modal")})),y.forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-tab");y.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),"login"===t?(h.style.display="block",p.style.display="none",s("auth","switch_to_login_tab")):"register"===t&&(h.style.display="none",p.style.display="block",s("auth","switch_to_register_tab"))}))})),g?.addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("loginEmail"),n=document.getElementById("loginPassword");try{await async function(e,t){try{const{getAuth:n,signInWithEmailAndPassword:o}=await Promise.all([r.e(461),r.e(150)]).then(r.bind(r,150)),i=n();return(await o(i,e,t)).user}catch(e){throw console.error("登入失敗:",e),e}}(t.value,n.value),u.style.display="none",await L(),s("auth","login_success")}catch(e){console.error("登入失敗:",e),alert("登入失敗，請檢查您的電子郵件和密碼。"),s("auth","login_error")}})),m?.addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("registerEmail"),n=document.getElementById("registerPassword"),o=document.getElementById("registerConfirmPassword");if(n.value===o.value)try{await async function(e,t){try{const{getAuth:n,createUserWithEmailAndPassword:o}=await Promise.all([r.e(461),r.e(150)]).then(r.bind(r,150)),i=n();return(await o(i,e,t)).user}catch(e){throw console.error("註冊失敗:",e),e}}(t.value,n.value),u.style.display="none",await L(),s("auth","register_success")}catch(e){console.error("註冊失敗:",e),alert("註冊失敗，請稍後再試。"),s("auth","register_error")}else alert("密碼不匹配，請重新輸入。")})),_?.addEventListener("click",(async()=>{try{await async function(){try{const{getAuth:e,signOut:t}=await Promise.all([r.e(461),r.e(150)]).then(r.bind(r,150)),n=e();await t(n)}catch(e){throw console.error("登出失敗:",e),e}}(),f.style.display="none",d.style.display="block",s("auth","logout")}catch(e){console.error("登出失敗:",e)}})),await L()}()}catch(e){console.error("初始化服務失敗:",e),alert("初始化失敗：無法連接到服務，請稍後再試")}var n;window.addEventListener("scroll",(()=>{window.scrollY>50?C.classList.add("scrolled"):C.classList.remove("scrolled"),document.querySelectorAll(".animate-on-scroll").forEach((e=>{e.getBoundingClientRect().top<window.innerHeight-150&&e.classList.add("active")}))})),B.addEventListener("click",(()=>{S.classList.toggle("active"),s("navigation","toggle_mobile_menu")})),document.querySelectorAll(".nav-link").forEach((e=>{e.addEventListener("click",(e=>{S.classList.remove("active"),s("navigation","click",e.currentTarget.textContent||"")}))})),U(),j&&j.addEventListener("submit",(async e=>{e.preventDefault();const t=j.querySelector("#name"),n=j.querySelector("#email"),o=j.querySelector("#phone"),i=j.querySelector("#message");if(!t.value||!n.value||!i.value)return void alert("請填寫所有必填欄位");const a={name:t.value,email:n.value,phone:o.value,message:i.value,submittedAt:(new Date).toISOString()};try{await async function(e){try{const{getFirestore:t,collection:n,addDoc:o}=await Promise.all([r.e(461),r.e(594)]).then(r.bind(r,594)),i=t();return(await o(n(i,"contactForms"),{...e,createdAt:new Date})).id}catch(e){throw console.error("保存表單失敗:",e),e}}(a),j.reset(),alert("訊息已成功送出，我們將盡快與您聯繫！"),s("form","submit","contact_form")}catch(e){console.error("提交表單時出錯:",e),alert("提交表單時出錯，請稍後再試")}})),T&&D&&M&&(localStorage.getItem("ageVerified")||(T.style.display="flex"),D.addEventListener("click",(()=>{localStorage.setItem("ageVerified","true"),T.style.display="none",s("age_verification","confirm")})),M.addEventListener("click",(()=>{s("age_verification","deny"),window.location.href="https://www.google.com"}))),function(){const e=document.querySelectorAll(".counter-number"),t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target,o=parseInt(n.getAttribute("data-target")||"0",10);let r=0;const i=2e3,a=Math.ceil(i/o),l=setInterval((()=>{r+=1,n.textContent=r.toString(),r>=o&&(clearInterval(l),n.textContent=o.toString())}),a);t.unobserve(n)}}))}),{threshold:.5});e.forEach((e=>{t.observe(e)}))}(),document.querySelectorAll(".testimonial-item").forEach((e=>{const t=e.querySelector(".testimonial-content"),n=e.querySelector(".testimonial-text");if(t&&n){const o=t.offsetHeight,r=o-n.offsetHeight;t.style.height=`${r}px`,t.style.overflow="hidden",t.style.transition="height 0.3s ease";const i=()=>{t.style.height=`${o}px`},a=()=>{t.style.height=`${r}px`};e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",a),e.addEventListener("click",(()=>{t.style.height===`${o}px`?a():i()}))}})),$&&(window.addEventListener("scroll",(()=>{window.scrollY>300?$.classList.add("active"):$.classList.remove("active")})),$.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"}),s("navigation","back_to_top")}))),P&&(P.textContent=(new Date).getFullYear().toString()),n=a,A&&(A.innerHTML=n.map((e=>{const t=I(e.imageUrl,{width:400,height:300,crop:"fill",quality:"auto"});return`\n      <div class="gallery-item" data-category="${e.category||""}" data-id="${e.id}">\n        <img src="${t}" alt="${e.title}" loading="lazy">\n        <div class="gallery-overlay">\n          <h3>${e.title}</h3>\n          <p>${e.description}</p>\n          <button class="view-btn" data-id="${e.id}">查看詳情</button>\n        </div>\n      </div>\n    `})).join(""),U()),function(e){if(!q)return;q.innerHTML=e.map((e=>`\n    <div class="service-card" data-id="${e.id}">\n      <div class="service-icon">\n        <i class="fas fa-${e.icon}"></i>\n      </div>\n      <h3 class="service-title">${e.title}</h3>\n      <p class="service-description">${e.description}</p>\n    </div>\n  `)).join(""),document.querySelectorAll(".service-card").forEach((e=>{e.addEventListener("click",(()=>{const t=e.querySelector(".service-title")?.textContent;s("service","click",t||"")}))}))}(i),function(){let e=[25,50,75,100],t=[];window.addEventListener("scroll",(()=>{const n=Math.floor(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100);e.forEach((e=>{n>=e&&!t.includes(e)&&(s("scroll_depth","scroll",`${e}%`),t.push(e))}))}))}()}))})();
//# sourceMappingURL=main.js.map